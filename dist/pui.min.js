/*
 * pui 0.0.1
 * A simple ui framework based on Jquery
 *
 * http://www.paipai.com
 *
 * Copyright 2014, hugohua
 *
 * Licensed under MIT
 *
 * Released on: May 21, 2014
*/
!function(a,b){if(!a.Pui){var c={version:"0.0.1"};c.mix=function(a,b){for(var c in b)a[c]=b[c];return a},c.mix(c,{$win:b(window),$doc:b(document),add:function(a,c){var d,e={};if("string"!=typeof a)return void b.error(a+"必须是个字符串！");this[a]=this[a]||{},d=c(e,this),d&&b.isPlainObject(d)&&b.extend(e,d);for(var f in e)this[a][f]=e[f],"init"===f&&e[f]();e=null},supports:function(a){var b,c=document.createElement("div"),d="Khtml Ms O Moz Webkit".split(" ");if(a in c.style)return!0;for(a=a.replace(/^[a-z]/,function(a){return a.toUpperCase()}),b=d.length-1;b>=0;){if(d[b]+a in c.style)return!0;b--}return!1},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},throttle:function(a,b){var c,d,e,f,g,h,i=this.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&(h=a.apply(c,d)),i()};return e||(e=setTimeout(j,b)),f?g=!0:(f=!0,h=a.apply(c,d)),i(),h}},detector:function(){function a(a){return Object.prototype.toString.call(a)}function b(b){return"[object String]"===a(b)}var c=navigator.userAgent.toLowerCase(),d=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,e=[["trident",d],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",/\bgecko\/(\d+)/],["presto",/\bpresto\/([0-9.]+)/]],f=[["ie",d],["firefox",/\bfirefox\/([0-9.ab]+)/],["opera",/\bopr\/([0-9.]+)/],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//]],g=[["windows",/\bwindows nt ([0-9.]+)/],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["linux","linux"]],h=[[6,"msie 6.0"],[7,"msie 7.0"],[8,"msie 8.0"],[9,"msie 9.0"],[10,"msie 10.0"]],i=function(a,c){for(var d in a){var e,f=a[d][0],g=a[d][1],h=b(g);if(h){if(-1!==c.indexOf(g))return e=f}else if(g.test(c))return e=f}return"unknow"};return{os:i(g,c),browser:i(f,c),engine:i(e,c),version:d.test(c)?i(h,c):""}},loadImg:function(a){var c=a.find("img[data-src]");c.length&&c.each(function(){var a=b(this),c=a.attr("data-src");a.attr("src",c).removeAttr("data-src")})}}),function(){var a={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},d=/.^/,e={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var f in e)e[e[f]]=f;var g=/\\|'|\r|\n|\t|\u2028|\u2029/g,h=function(a){return"\\"+e[a]};c.tmpl=function(c,e,f){f=b.extend({},f,a);var i=new RegExp([(f.escape||d).source,(f.interpolate||d).source,(f.evaluate||d).source].join("|")+"|$","g"),j=0,k="__p+='";c.replace(i,function(a,b,d,e,f){return k+=c.slice(j,f).replace(g,h),j=f+a.length,b?k+="'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'":d?k+="'+\n((__t=("+d+"))==null?'':__t)+\n'":e&&(k+="';\n"+e+"\n__p+='"),a}),k+="';\n",f.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{var l=new Function(f.variable||"obj",k)}catch(m){throw m.source=k,m}if(e)return l(e);var n=function(a){return l.call(this,a)},o=f.variable||"obj";return n.source="function("+o+"){\n"+k+"}",n}}();var d=0,e=[].slice;c.widget=function(a,d,e){var f,g,h,i=a.split(".")[0],j={};return a=a.split(".")[1],f=i+"-"+a,e||(e=d,d=c.Base),b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)},c[i]=c[i]||{},h=c[i][a]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new h(a,b)},h.version=e.version,g=new d,b.each(e,function(a,c){return b.isFunction(c)?void(j[a]=function(){var b=function(){return d.prototype[a].apply(this,arguments)},e=function(b){return d.prototype[a].apply(this,b)};return function(){var a,d=this._super,f=this._superApply;return this._super=b,this._superApply=e,a=c.apply(this,arguments),this._super=d,this._superApply=f,a}}()):void(j[a]=c)}),h.prototype=b.extend(!0,g,{namespace:i,widgetName:a,widgetFullName:f,constructor:h,widgetEventPrefix:h.prototype.widgetEventPrefix||a},j),c.bridge(a,h),h},c.Base=function(){},c.Base.prototype={_createWidget:function(a,c){this.$el=b(a),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=b.extend(!0,{},this.options,this.$el.data(),c),b.data(this.$el[0],this.widgetFullName,this),this.bindings=b(),this._create(),this._trigger("create"),this._init()},_create:b.noop,_init:b.noop,_destroy:b.noop,widget:function(){return this.$el},option:function(a,c){var d,e,f,g=a;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"==typeof a)if(g={},d=a.split("."),a=d.shift(),d.length){for(e=g[a]=b.extend(!0,{},this.options[a]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(a=d.pop(),1===arguments.length)return void 0===e[a]?null:e[a];e[a]=c}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];g[a]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},destroy:function(){this._destroy(),this.$el.unbind(this.eventNamespace).removeData(this.widgetFullName),this.bindings.unbind(this.eventNamespace)},_trigger:function(a,c,d){var e,f,g=this.options[a];if(d=d||{},c=b.Event(c),c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c.target=this.$el[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.$el.trigger(c,d),!(b.isFunction(g)&&g.apply(this.$el[0],[c].concat(d))===!1||c.isDefaultPrevented())},_on:function(a,c,d){var e,f=this;"boolean"!=typeof a&&(d=c,c=a,a=!1),d?(c=e=b(c),this.bindings=this.bindings.add(c)):(d=c,c=this.$el,e=this.widget()),b.each(d,function(d,g){function h(){return a||f.options.disabled!==!0?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||b.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},tpl2html:function(){var a=this.template;console.info(a,"tpl")}},c.bridge=function(a,c){var d=c.prototype.widgetFullName||a;b.fn[a]=function(f){var g="string"===b.type(f),h=e.call(arguments,1),i=this;return f=!g&&h.length?b.extend.apply(null,[!0,f].concat(h)):f,this.each(g?function(){var c,e=b.data(this,d);return"instance"===f?(i=e,!1):b.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):b.error(f+"' 是 "+a+" 的私有方法，不可直接调用")}:function(){var a=b.data(this,d);a?a._init&&a._init():b.data(this,d,new c(this,f))}),i}},this.Pui=c,"function"==typeof define&&define(function(a,b,d){d.exports=c})}}(this,jQuery),function(a,b){var c=b.detector(),d="ie"===c.browser&&c.version&&c.version<9,e=function(){var d=b.supports("Transition")?"transitions":"notransitions",d=b.supports("animation")?d+" animations":d+" noanimations",e=c.version?"ie"+c.version:"";a("html").addClass(d+" "+c.os+" "+c.engine+" "+c.browser+" "+e)},f=function(){var c=a("body"),e=1,f=function(){var a=(document.documentElement.clientWidth||document.body.clientWidth)<1190;a&&1===e?(e=2,d&&c.addClass("p_mini"),c.trigger("resizebody",["mini"])):a||2!==e||(e=1,d&&c.removeClass("p_mini"),c.trigger("resizebody",["normal"]))};d&&f(),b.$win.on("resize.global",b.throttle(function(){f()},500))},g=function(){if(c.version<7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}},h=function(){e(),!window.noMini&&f(),g()};h()}(jQuery,Pui);